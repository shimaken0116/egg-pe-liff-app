<!-- Rich Menu Editor/Builder Page -->
<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2" id="rich-menu-editor-title">リッチメニューの新規作成</h1>
        <div class="btn-toolbar mb-2 mb-md-0">
            <button type="button" class="btn btn-secondary" id="backToRichMenuListButton">
                一覧に戻る
            </button>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="editor-loading-spinner" class="text-center my-5" style="display: none;">
        <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-2">リッチメニューの情報を読み込んでいます...</p>
    </div>

    <!-- Main Form -->
    <form id="richMenuForm" style="display: none;">
        <!-- Rich Menu Name -->
        <div class="mb-3">
            <label for="richMenuName" class="form-label">リッチメニュー名</label>
            <input type="text" class="form-control" id="richMenuName" placeholder="例: 通常メニュー" required>
            <div class="form-text">管理画面上でのみ表示される名前です。</div>
        </div>

        <!-- Rich Menu Chat Bar Text -->
        <div class="mb-3">
            <label for="chatBarText" class="form-label">チャットバーテキスト</label>
            <input type="text" class="form-control" id="chatBarText" placeholder="例: メニュー" required>
            <div class="form-text">LINEのトーク画面下部に表示されるテキストです。</div>
        </div>

        <!-- Rich Menu JSON Definition -->
        <div class="mb-3">
            <label for="richMenuJson" class="form-label">リッチメニュー定義 (JSON)</label>
            <p class="form-text">
                LINEの<a href="https://developers.line.biz/ja/reference/messaging-api/#rich-menu-object" target="_blank">リッチメニューオブジェクト</a>の仕様に従ってJSONを編集してください。<br>
                名前とチャットバーテキストは上のフォームで設定されるため、このJSONからは除外されます。主に `areas` を編集します。
            </p>
            <textarea class="form-control" id="richMenuJson" rows="18" required></textarea>
        </div>

        <!-- Rich Menu Image -->
        <div class="mb-3">
            <label for="richMenuImage" class="form-label">背景画像</label>
            <p class="form-text">対応形式: JPEGまたはPNG。サイズ: 2500x1686または2500x843。最大ファイルサイズ: 1MB。</p>
            <input class="form-control" type="file" id="richMenuImage" accept="image/jpeg, image/png">
            <div class="mt-2">
                <p>現在の画像:</p>
                <img id="currentRichMenuImage" src="" alt="現在の背景画像" class="img-fluid" style="max-width: 300px; display: none;">
                <p id="noRichMenuImage" class="text-muted" style="display: none;">画像が設定されていません。</p>
            </div>
        </div>
        
        <hr class="my-4">

        <!-- Action Buttons -->
        <div class="d-flex justify-content-between">
            <div>
                <button type="submit" class="btn btn-primary" id="saveRichMenuButton">保存</button>
                <span id="save-result" class="ms-3"></span>
            </div>
            <button type="button" class="btn btn-danger" id="deleteRichMenuButton" style="display: none;">このリッチメニューを削除</button>
        </div>
    </form>
</div> 